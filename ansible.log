2016-09-23 15:51:19,001 p=26276 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 15:51:19,032 p=26276 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 15:51:19,964 p=26276 u=mjohnson |  ok: [nifi2.hdp]
2016-09-23 15:51:19,995 p=26276 u=mjohnson |  ok: [nifi1.hdp]
2016-09-23 15:51:19,998 p=26276 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 15:51:20,006 p=26276 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 15:51:22,489 p=26276 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 15:51:22,513 p=26276 u=mjohnson |  changed: [nifi1.hdp] => (item={u'name': u'openldap'})
2016-09-23 15:51:22,557 p=26276 u=mjohnson |  changed: [nifi2.hdp] => (item={u'name': u'openldap'})
2016-09-23 15:51:24,500 p=26276 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 15:51:24,541 p=26276 u=mjohnson |  changed: [nifi1.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 15:51:24,636 p=26276 u=mjohnson |  changed: [nifi2.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 15:51:28,262 p=26276 u=mjohnson |  changed: [nifi1.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 15:51:28,429 p=26276 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 15:51:28,470 p=26276 u=mjohnson |  changed: [nifi2.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 15:51:28,479 p=26276 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 15:51:28,479 p=26276 u=mjohnson |  nifi1.hdp                  : ok=2    changed=1    unreachable=0    failed=0   
2016-09-23 15:51:28,479 p=26276 u=mjohnson |  nifi2.hdp                  : ok=2    changed=1    unreachable=0    failed=0   
2016-09-23 15:51:28,479 p=26276 u=mjohnson |  nifi3.hdp                  : ok=2    changed=1    unreachable=0    failed=0   
2016-09-23 17:05:43,282 p=26897 u=mjohnson |  ERROR! this task 'template' has extra params, which is only allowed in the following modules: command, shell, script, include, include_vars, add_host, group_by, set_fact, raw, meta

The error appears to have been in '/Users/mjohnson/openLDAP/installOpenLDAP.yml': line 29, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# OpenSSL connectivity
  - name: generate the Database files
    ^ here


The error appears to have been in '/Users/mjohnson/openLDAP/installOpenLDAP.yml': line 29, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# OpenSSL connectivity
  - name: generate the Database files
    ^ here

2016-09-23 17:10:04,022 p=26926 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:10:04,051 p=26926 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:10:04,324 p=26926 u=mjohnson |  fatal: [nifi5.hdp]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh.", "unreachable": true}
2016-09-23 17:10:04,332 p=26926 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:10:04,332 p=26926 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:10:04,332 p=26926 u=mjohnson |  nifi5.hdp                  : ok=0    changed=0    unreachable=1    failed=0   
2016-09-23 17:11:19,298 p=26965 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:11:19,321 p=26965 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:11:20,290 p=26965 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:11:20,298 p=26965 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:11:20,799 p=26965 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:11:20,807 p=26965 u=mjohnson |  TASK [Clean it up first] *******************************************************
2016-09-23 17:11:22,731 p=26965 u=mjohnson |  failed: [nifi3.hdp] (item={u'name': u'openldap'}) => {"changed": false, "failed": true, "item": {"name": "openldap"}, "msg": "Error: Trying to remove \"systemd\", which is protected\nError: Trying to remove \"yum\", which is protected\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nResolving Dependencies\n--> Running transaction check\n---> Package openldap.x86_64 0:2.4.40-9.el7_2 will be erased\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: gnupg2-2.0.22-3.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libuser-0.60-7.el7_1.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap_r-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libslapi-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Running transaction check\n---> Package dhclient.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhclient for package: dracut-network-033-359.el7.x86_64\n--> Processing Dependency: dhclient >= 12:4.1.0 for package: 1:NetworkManager-1.0.6-27.el7.x86_64\n---> Package dhcp-libs.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhcp-libs(x86-64) = 12:4.2.5-42.el7.centos for package: 12:dhcp-common-4.2.5-42.el7.centos.x86_64\n---> Package gnupg2.x86_64 0:2.0.22-3.el7 will be erased\n--> Processing Dependency: gnupg2 for package: gpgme-1.3.2-5.el7.x86_64\n---> Package libcurl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: libcurl = 7.29.0-25.el7.centos for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl >= 7.29.0 for package: python-pycurl-7.19.0-17.el7.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: python-pycurl-7.19.0-17.el7.x86_64\n---> Package libuser.x86_64 0:0.60-7.el7_1 will be erased\n--> Processing Dependency: libuser.so.1()(64bit) for package: util-linux-2.23.2-26.el7.x86_64\n--> Processing Dependency: libuser.so.1()(64bit) for package: passwd-0.79-4.el7.x86_64\n---> Package openldap-clients.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openldap-servers.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openssh.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-clients.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-server.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package postfix.x86_64 2:2.10.1-6.el7 will be erased\n---> Package sudo.x86_64 0:1.8.6p7-16.el7 will be erased\n--> Running transaction check\n---> Package NetworkManager.x86_64 1:1.0.6-27.el7 will be erased\n--> Processing Dependency: NetworkManager = 1:1.0.6-27.el7 for package: 1:NetworkManager-tui-1.0.6-27.el7.x86_64\n--> Processing Dependency: NetworkManager(x86-64) = 1:1.0.6-27.el7 for package: 1:NetworkManager-wifi-1.0.6-27.el7.x86_64\n---> Package curl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: curl for package: rpm-4.11.3-17.el7.x86_64\n---> Package dhcp-common.x86_64 12:4.2.5-42.el7.centos will be erased\n---> Package dracut-network.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut-network for package: kexec-tools-2.0.7-38.el7.x86_64\n---> Package gpgme.x86_64 0:1.3.2-5.el7 will be erased\n--> Processing Dependency: libgpgme.so.11()(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.0)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.1)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n---> Package passwd.x86_64 0:0.79-4.el7 will be erased\n---> Package python-pycurl.x86_64 0:7.19.0-17.el7 will be erased\n--> Processing Dependency: python-pycurl for package: python-urlgrabber-3.10-7.el7.noarch\n---> Package util-linux.x86_64 0:2.23.2-26.el7 will be erased\n--> Processing Dependency: /bin/dmesg for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/kill for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/more for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/mount for package: policycoreutils-2.2.5-20.el7.x86_64\n--> Processing Dependency: /bin/mount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/umount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: util-linux >= 2.21 for package: dracut-033-359.el7.x86_64\n--> Processing Dependency: util-linux for package: tuned-2.5.1-4.el7.noarch\n--> Processing Dependency: util-linux >= 2.16 for package: initscripts-9.49.30-1.el7.x86_64\n--> Processing Dependency: util-linux >= 2.23 for package: 7:device-mapper-1.02.107-5.el7.x86_64\n--> Processing Dependency: util-linux for package: virt-what-1.13-6.el7.x86_64\n--> Processing Dependency: util-linux for package: os-prober-1.58-5.el7.x86_64\n--> Running transaction check\n---> Package NetworkManager-tui.x86_64 1:1.0.6-27.el7 will be erased\n---> Package NetworkManager-wifi.x86_64 1:1.0.6-27.el7 will be erased\n---> Package device-mapper.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-event-1.02.107-5.el7.x86_64\n---> Package dracut.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut for package: kmod-20-5.el7.x86_64\n--> Processing Dependency: dracut for package: plymouth-scripts-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: dracut = 033-359.el7 for package: dracut-config-rescue-033-359.el7.x86_64\n---> Package initscripts.x86_64 0:9.49.30-1.el7 will be erased\n--> Processing Dependency: initscripts for package: zookeeper_2_0_0_0_579-server-3.4.6.2.0.0.0-579.el6.noarch\n--> Processing Dependency: initscripts >= 8.83-1 for package: plymouth-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: initscripts >= 5.86-1 for package: kbd-1.15.5-11.el7.x86_64\n---> Package kexec-tools.x86_64 0:2.0.7-38.el7 will be erased\n---> Package os-prober.x86_64 0:1.58-5.el7 will be erased\n--> Processing Dependency: os-prober for package: 1:grub2-tools-2.02-0.29.el7.centos.x86_64\n---> Package policycoreutils.x86_64 0:2.2.5-20.el7 will be erased\n--> Processing Dependency: policycoreutils for package: authconfig-6.2.8-10.el7.x86_64\n---> Package pygpgme.x86_64 0:0.3-9.el7 will be erased\n--> Processing Dependency: pygpgme for package: yum-3.4.3-132.el7.centos.0.1.noarch\n---> Package python-urlgrabber.noarch 0:3.10-7.el7 will be erased\n---> Package redhat-lsb-core.x86_64 0:4.1-27.el7.centos.1 will be erased\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-languages-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-cxx-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-printing-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-desktop-4.1-27.el7.centos.1.x86_64\n---> Package rpm.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-python-4.11.3-17.el7.x86_64\n---> Package tuned.noarch 0:2.5.1-4.el7 will be erased\n---> Package virt-what.x86_64 0:1.13-6.el7 will be erased\n--> Running transaction check\n---> Package authconfig.x86_64 0:6.2.8-10.el7 will be erased\n---> Package device-mapper-event.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper-event = 7:1.02.107-5.el7 for package: 7:lvm2-libs-2.02.130-5.el7.x86_64\n---> Package device-mapper-libs.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_100)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_101)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_104)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n---> Package dracut-config-rescue.x86_64 0:033-359.el7 will be erased\n---> Package grub2-tools.x86_64 1:2.02-0.29.el7.centos will be erased\n--> Processing Dependency: grub2-tools = 1:2.02-0.29.el7.centos for package: 1:grub2-efi-2.02-0.29.el7.centos.x86_64\n---> Package kbd.x86_64 0:1.15.5-11.el7 will be erased\n---> Package kmod.x86_64 0:20-5.el7 will be erased\n--> Processing Dependency: kmod >= 18-4 for package: systemd-219-19.el7.x86_64\n---> Package plymouth.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package plymouth-scripts.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package redhat-lsb.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-cxx.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-desktop.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-languages.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-printing.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package rpm-libs.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: librpm.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: librpmio.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm-libs(x86-64) = 4.11.3-17.el7 for package: rpm-build-libs-4.11.3-17.el7.x86_64\n---> Package rpm-python.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm-python for package: ambari-agent-2.4.1.0-22.x86_64\n---> Package yum.noarch 0:3.4.3-132.el7.centos.0.1 will be erased\n--> Processing Dependency: yum >= 3.0 for package: yum-plugin-fastestmirror-1.1.31-34.el7.noarch\n---> Package zookeeper_2_0_0_0_579-server.noarch 0:3.4.6.2.0.0.0-579.el6 will be erased\n--> Running transaction check\n---> Package ambari-agent.x86_64 0:2.4.1.0-22 will be erased\n---> Package cryptsetup-libs.x86_64 0:1.6.7-1.el7 will be erased\n---> Package device-mapper-event-libs.x86_64 7:1.02.107-5.el7 will be erased\n---> Package grub2-efi.x86_64 1:2.02-0.29.el7.centos will be erased\n---> Package kpartx.x86_64 0:0.4.9-85.el7 will be erased\n---> Package lvm2.x86_64 7:2.02.130-5.el7 will be erased\n---> Package lvm2-libs.x86_64 7:2.02.130-5.el7 will be erased\n---> Package parted.x86_64 0:3.1-23.el7 will be erased\n---> Package rpm-build-libs.x86_64 0:4.11.3-17.el7 will be erased\n---> Package systemd.x86_64 0:219-19.el7 will be erased\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: ppp-2.4.5-33.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd = 219-19.el7 for package: systemd-sysv-219-19.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: udev for package: alsa-firmware-1.0.28-2.el7.noarch\n--> Processing Dependency: udev for package: fxload-2002_04_11-16.el7.x86_64\n--> Processing Dependency: udev for package: libdrm-2.4.60-3.el7.x86_64\n--> Processing Dependency: udev for package: alsa-tools-firmware-1.0.28-2.el7.x86_64\n--> Processing Dependency: udev for package: biosdevname-0.6.2-1.el7.x86_64\n--> Processing Dependency: udev for package: aic94xx-firmware-30-6.el7.noarch\n---> Package yum-plugin-fastestmirror.noarch 0:1.1.31-34.el7 will be erased\n--> Running transaction check\n---> Package aic94xx-firmware.noarch 0:30-6.el7 will be erased\n---> Package alsa-firmware.noarch 0:1.0.28-2.el7 will be erased\n---> Package alsa-tools-firmware.x86_64 0:1.0.28-2.el7 will be erased\n---> Package at.x86_64 0:3.1.13-20.el7 will be erased\n---> Package audit.x86_64 0:2.4.1-5.el7 will be erased\n---> Package biosdevname.x86_64 0:0.6.2-1.el7 will be erased\n---> Package cronie.x86_64 0:1.4.11-14.el7 will be erased\n--> Processing Dependency: cronie = 1.4.11-14.el7 for package: cronie-anacron-1.4.11-14.el7.x86_64\n---> Package dbus.x86_64 1:1.6.12-13.el7 will be erased\n---> Package dnsmasq.x86_64 0:2.66-14.el7_1 will be erased\n---> Package fxload.x86_64 0:2002_04_11-16.el7 will be erased\n---> Package hwdata.x86_64 0:0.252-8.1.el7 will be erased\n--> Processing Dependency: hwdata for package: pciutils-3.2.1-4.el7.x86_64\n--> Processing Dependency: hwdata for package: libpciaccess-0.13.4-2.el7.x86_64\n---> Package iputils.x86_64 0:20121221-7.el7 will be erased\n---> Package irqbalance.x86_64 3:1.0.7-5.el7 will be erased\n---> Package libdrm.x86_64 0:2.4.60-3.el7 will be erased\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libgbm-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libEGL-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libGL-10.6.5-3.20150824.el7.x86_64\n---> Package microcode_ctl.x86_64 2:2.1-12.el7 will be erased\n---> Package ntp.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package ntpdate.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package polkit.x86_64 0:0.112-5.el7 will be erased\n--> Processing Dependency: libpolkit-gobject-1.so.0()(64bit) for package: polkit-pkla-compat-0.1-4.el7.x86_64\n---> Package ppp.x86_64 0:2.4.5-33.el7 will be erased\n---> Package rsyslog.x86_64 0:7.4.7-12.el7 will be erased\n---> Package systemd-sysv.x86_64 0:219-19.el7 will be erased\n---> Package trousers.x86_64 0:0.3.13-1.el7 will be erased\n--> Processing Dependency: libtspi.so.1()(64bit) for package: gnutls-3.3.8-12.el7_1.1.x86_64\n---> Package wpa_supplicant.x86_64 1:2.0-17.el7_1 will be erased\n--> Running transaction check\n---> Package cronie-anacron.x86_64 0:1.4.11-14.el7 will be erased\n---> Package gnutls.x86_64 0:3.3.8-12.el7_1.1 will be erased\n--> Processing Dependency: libgnutls.so.28()(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_1_4)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_2_12)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_3_0_0)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n---> Package libpciaccess.x86_64 0:0.13.4-2.el7 will be erased\n---> Package mesa-libEGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libEGL.so.1()(64bit) for package: cairo-1.14.2-1.el7.x86_64\n---> Package mesa-libGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libGL.so.1()(64bit) for package: mesa-libGLU-9.0.0-4.el7.x86_64\n--> Processing Dependency: libGL.so.1()(64bit) for package: 1:qt-x11-4.8.5-12.el7_2.x86_64\n---> Package mesa-libgbm.x86_64 0:10.6.5-3.20150824.el7 will be erased\n---> Package pciutils.x86_64 0:3.2.1-4.el7 will be erased\n--> Processing Dependency: pciutils for package: qt-settings-19-23.5.el7.centos.noarch\n---> Package polkit-pkla-compat.x86_64 0:0.1-4.el7 will be erased\n--> Running transaction check\n---> Package cairo.x86_64 0:1.14.2-1.el7 will be erased\n--> Processing Dependency: cairo(x86-64) >= 1.7.6 for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: gtk2-2.24.28-8.el7.x86_64\n---> Package glib-networking.x86_64 0:2.42.0-1.el7 will be erased\n--> Processing Dependency: glib-networking >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n--> Processing Dependency: glib-networking(x86-64) >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n---> Package mesa-libGLU.x86_64 0:9.0.0-4.el7 will be erased\n---> Package qt-settings.noarch 0:19-23.5.el7.centos will be erased\n--> Processing Dependency: qt-settings for package: 1:qt-4.8.5-12.el7_2.x86_64\n---> Package qt-x11.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Running transaction check\n---> Package gtk2.x86_64 0:2.24.28-8.el7 will be erased\n---> Package libsoup.x86_64 0:2.48.1-3.el7 will be erased\n---> Package pango.x86_64 0:1.36.8-2.el7 will be erased\n---> Package qt.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Processing Dependency: /etc/cron.d for package: crontabs-1.11-6.20121102git.el7.noarch\n--> Restarting Dependency Resolution with new changes.\n--> Running transaction check\n---> Package crontabs.noarch 0:1.11-6.20121102git.el7 will be erased\n--> Finished Dependency Resolution\n"]}
2016-09-23 17:11:23,679 p=26965 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:11:24,754 p=26965 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:11:24,761 p=26965 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:11:24,763 p=26965 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:11:24,763 p=26965 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:11:24,763 p=26965 u=mjohnson |  nifi3.hdp                  : ok=2    changed=1    unreachable=0    failed=1   
2016-09-23 17:14:57,991 p=27026 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:14:58,013 p=27026 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:14:58,965 p=27026 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:14:58,973 p=27026 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:14:59,383 p=27026 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": false, "failed": true, "msg": "systemd could not find the requested service \"'slapd'\": "}
2016-09-23 17:14:59,389 p=27026 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:14:59,390 p=27026 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:14:59,390 p=27026 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:14:59,390 p=27026 u=mjohnson |  nifi3.hdp                  : ok=1    changed=0    unreachable=0    failed=1   
2016-09-23 17:15:16,779 p=27061 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:15:16,796 p=27061 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:15:17,525 p=27061 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:15:17,534 p=27061 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:15:17,940 p=27061 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": false, "failed": true, "msg": "systemd could not find the requested service \"'slapd'\": "}
2016-09-23 17:15:17,940 p=27061 u=mjohnson |  ...ignoring
2016-09-23 17:15:17,947 p=27061 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 17:15:19,009 p=27061 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 17:15:21,094 p=27061 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:15:24,084 p=27061 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:15:24,093 p=27061 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:15:24,448 p=27061 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:15:24,458 p=27061 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:15:25,119 p=27061 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:15:25,126 p=27061 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-09-23 17:15:25,390 p=27061 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002363", "end": "2016-09-23 17:15:25.410205", "failed": true, "rc": 1, "start": "2016-09-23 17:15:25.407842", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-09-23 17:15:25,396 p=27061 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:15:25,397 p=27061 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:15:25,397 p=27061 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:15:25,397 p=27061 u=mjohnson |  nifi3.hdp                  : ok=5    changed=2    unreachable=0    failed=1   
2016-09-23 17:17:04,104 p=27124 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:17:04,122 p=27124 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:17:05,109 p=27124 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:17:05,117 p=27124 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:17:05,537 p=27124 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:17:05,545 p=27124 u=mjohnson |  TASK [remove old ldap configs] *************************************************
2016-09-23 17:17:05,884 p=27124 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:17:05,892 p=27124 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 17:17:06,937 p=27124 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 17:17:07,817 p=27124 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:17:08,713 p=27124 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:17:08,721 p=27124 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:17:09,056 p=27124 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:17:09,063 p=27124 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:17:09,760 p=27124 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "failed": true, "msg": "Destination directory /var/lib/ldap does not exist"}
2016-09-23 17:17:09,767 p=27124 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:17:09,768 p=27124 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:17:09,768 p=27124 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:17:09,768 p=27124 u=mjohnson |  nifi3.hdp                  : ok=5    changed=2    unreachable=0    failed=1   
2016-09-23 17:19:55,452 p=27203 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:19:55,470 p=27203 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:19:56,409 p=27203 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:19:56,418 p=27203 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:19:56,827 p=27203 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:19:56,835 p=27203 u=mjohnson |  TASK [remove OpenLDAP Server] **************************************************
2016-09-23 17:19:58,797 p=27203 u=mjohnson |  failed: [nifi3.hdp] (item={u'name': u'openldap'}) => {"changed": false, "failed": true, "item": {"name": "openldap"}, "msg": "Error: Trying to remove \"systemd\", which is protected\nError: Trying to remove \"yum\", which is protected\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nResolving Dependencies\n--> Running transaction check\n---> Package openldap.x86_64 0:2.4.40-9.el7_2 will be erased\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: gnupg2-2.0.22-3.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libuser-0.60-7.el7_1.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap_r-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libslapi-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Running transaction check\n---> Package dhclient.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhclient for package: dracut-network-033-359.el7.x86_64\n--> Processing Dependency: dhclient >= 12:4.1.0 for package: 1:NetworkManager-1.0.6-27.el7.x86_64\n---> Package dhcp-libs.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhcp-libs(x86-64) = 12:4.2.5-42.el7.centos for package: 12:dhcp-common-4.2.5-42.el7.centos.x86_64\n---> Package gnupg2.x86_64 0:2.0.22-3.el7 will be erased\n--> Processing Dependency: gnupg2 for package: gpgme-1.3.2-5.el7.x86_64\n---> Package libcurl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: libcurl = 7.29.0-25.el7.centos for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl >= 7.29.0 for package: python-pycurl-7.19.0-17.el7.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: python-pycurl-7.19.0-17.el7.x86_64\n---> Package libuser.x86_64 0:0.60-7.el7_1 will be erased\n--> Processing Dependency: libuser.so.1()(64bit) for package: util-linux-2.23.2-26.el7.x86_64\n--> Processing Dependency: libuser.so.1()(64bit) for package: passwd-0.79-4.el7.x86_64\n---> Package openldap-clients.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openldap-servers.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openssh.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-clients.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-server.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package postfix.x86_64 2:2.10.1-6.el7 will be erased\n---> Package sudo.x86_64 0:1.8.6p7-16.el7 will be erased\n--> Running transaction check\n---> Package NetworkManager.x86_64 1:1.0.6-27.el7 will be erased\n--> Processing Dependency: NetworkManager = 1:1.0.6-27.el7 for package: 1:NetworkManager-tui-1.0.6-27.el7.x86_64\n--> Processing Dependency: NetworkManager(x86-64) = 1:1.0.6-27.el7 for package: 1:NetworkManager-wifi-1.0.6-27.el7.x86_64\n---> Package curl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: curl for package: rpm-4.11.3-17.el7.x86_64\n---> Package dhcp-common.x86_64 12:4.2.5-42.el7.centos will be erased\n---> Package dracut-network.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut-network for package: kexec-tools-2.0.7-38.el7.x86_64\n---> Package gpgme.x86_64 0:1.3.2-5.el7 will be erased\n--> Processing Dependency: libgpgme.so.11()(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.0)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.1)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n---> Package passwd.x86_64 0:0.79-4.el7 will be erased\n---> Package python-pycurl.x86_64 0:7.19.0-17.el7 will be erased\n--> Processing Dependency: python-pycurl for package: python-urlgrabber-3.10-7.el7.noarch\n---> Package util-linux.x86_64 0:2.23.2-26.el7 will be erased\n--> Processing Dependency: /bin/dmesg for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/kill for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/more for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/mount for package: policycoreutils-2.2.5-20.el7.x86_64\n--> Processing Dependency: /bin/mount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/umount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: util-linux >= 2.21 for package: dracut-033-359.el7.x86_64\n--> Processing Dependency: util-linux for package: tuned-2.5.1-4.el7.noarch\n--> Processing Dependency: util-linux >= 2.16 for package: initscripts-9.49.30-1.el7.x86_64\n--> Processing Dependency: util-linux >= 2.23 for package: 7:device-mapper-1.02.107-5.el7.x86_64\n--> Processing Dependency: util-linux for package: virt-what-1.13-6.el7.x86_64\n--> Processing Dependency: util-linux for package: os-prober-1.58-5.el7.x86_64\n--> Running transaction check\n---> Package NetworkManager-tui.x86_64 1:1.0.6-27.el7 will be erased\n---> Package NetworkManager-wifi.x86_64 1:1.0.6-27.el7 will be erased\n---> Package device-mapper.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-event-1.02.107-5.el7.x86_64\n---> Package dracut.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut for package: kmod-20-5.el7.x86_64\n--> Processing Dependency: dracut for package: plymouth-scripts-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: dracut = 033-359.el7 for package: dracut-config-rescue-033-359.el7.x86_64\n---> Package initscripts.x86_64 0:9.49.30-1.el7 will be erased\n--> Processing Dependency: initscripts for package: zookeeper_2_0_0_0_579-server-3.4.6.2.0.0.0-579.el6.noarch\n--> Processing Dependency: initscripts >= 8.83-1 for package: plymouth-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: initscripts >= 5.86-1 for package: kbd-1.15.5-11.el7.x86_64\n---> Package kexec-tools.x86_64 0:2.0.7-38.el7 will be erased\n---> Package os-prober.x86_64 0:1.58-5.el7 will be erased\n--> Processing Dependency: os-prober for package: 1:grub2-tools-2.02-0.29.el7.centos.x86_64\n---> Package policycoreutils.x86_64 0:2.2.5-20.el7 will be erased\n--> Processing Dependency: policycoreutils for package: authconfig-6.2.8-10.el7.x86_64\n---> Package pygpgme.x86_64 0:0.3-9.el7 will be erased\n--> Processing Dependency: pygpgme for package: yum-3.4.3-132.el7.centos.0.1.noarch\n---> Package python-urlgrabber.noarch 0:3.10-7.el7 will be erased\n---> Package redhat-lsb-core.x86_64 0:4.1-27.el7.centos.1 will be erased\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-languages-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-cxx-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-printing-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-desktop-4.1-27.el7.centos.1.x86_64\n---> Package rpm.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-python-4.11.3-17.el7.x86_64\n---> Package tuned.noarch 0:2.5.1-4.el7 will be erased\n---> Package virt-what.x86_64 0:1.13-6.el7 will be erased\n--> Running transaction check\n---> Package authconfig.x86_64 0:6.2.8-10.el7 will be erased\n---> Package device-mapper-event.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper-event = 7:1.02.107-5.el7 for package: 7:lvm2-libs-2.02.130-5.el7.x86_64\n---> Package device-mapper-libs.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_100)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_101)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_104)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n---> Package dracut-config-rescue.x86_64 0:033-359.el7 will be erased\n---> Package grub2-tools.x86_64 1:2.02-0.29.el7.centos will be erased\n--> Processing Dependency: grub2-tools = 1:2.02-0.29.el7.centos for package: 1:grub2-efi-2.02-0.29.el7.centos.x86_64\n---> Package kbd.x86_64 0:1.15.5-11.el7 will be erased\n---> Package kmod.x86_64 0:20-5.el7 will be erased\n--> Processing Dependency: kmod >= 18-4 for package: systemd-219-19.el7.x86_64\n---> Package plymouth.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package plymouth-scripts.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package redhat-lsb.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-cxx.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-desktop.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-languages.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-printing.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package rpm-libs.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: librpm.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: librpmio.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm-libs(x86-64) = 4.11.3-17.el7 for package: rpm-build-libs-4.11.3-17.el7.x86_64\n---> Package rpm-python.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm-python for package: ambari-agent-2.4.1.0-22.x86_64\n---> Package yum.noarch 0:3.4.3-132.el7.centos.0.1 will be erased\n--> Processing Dependency: yum >= 3.0 for package: yum-plugin-fastestmirror-1.1.31-34.el7.noarch\n---> Package zookeeper_2_0_0_0_579-server.noarch 0:3.4.6.2.0.0.0-579.el6 will be erased\n--> Running transaction check\n---> Package ambari-agent.x86_64 0:2.4.1.0-22 will be erased\n---> Package cryptsetup-libs.x86_64 0:1.6.7-1.el7 will be erased\n---> Package device-mapper-event-libs.x86_64 7:1.02.107-5.el7 will be erased\n---> Package grub2-efi.x86_64 1:2.02-0.29.el7.centos will be erased\n---> Package kpartx.x86_64 0:0.4.9-85.el7 will be erased\n---> Package lvm2.x86_64 7:2.02.130-5.el7 will be erased\n---> Package lvm2-libs.x86_64 7:2.02.130-5.el7 will be erased\n---> Package parted.x86_64 0:3.1-23.el7 will be erased\n---> Package rpm-build-libs.x86_64 0:4.11.3-17.el7 will be erased\n---> Package systemd.x86_64 0:219-19.el7 will be erased\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: ppp-2.4.5-33.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd = 219-19.el7 for package: systemd-sysv-219-19.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: udev for package: alsa-firmware-1.0.28-2.el7.noarch\n--> Processing Dependency: udev for package: fxload-2002_04_11-16.el7.x86_64\n--> Processing Dependency: udev for package: libdrm-2.4.60-3.el7.x86_64\n--> Processing Dependency: udev for package: alsa-tools-firmware-1.0.28-2.el7.x86_64\n--> Processing Dependency: udev for package: biosdevname-0.6.2-1.el7.x86_64\n--> Processing Dependency: udev for package: aic94xx-firmware-30-6.el7.noarch\n---> Package yum-plugin-fastestmirror.noarch 0:1.1.31-34.el7 will be erased\n--> Running transaction check\n---> Package aic94xx-firmware.noarch 0:30-6.el7 will be erased\n---> Package alsa-firmware.noarch 0:1.0.28-2.el7 will be erased\n---> Package alsa-tools-firmware.x86_64 0:1.0.28-2.el7 will be erased\n---> Package at.x86_64 0:3.1.13-20.el7 will be erased\n---> Package audit.x86_64 0:2.4.1-5.el7 will be erased\n---> Package biosdevname.x86_64 0:0.6.2-1.el7 will be erased\n---> Package cronie.x86_64 0:1.4.11-14.el7 will be erased\n--> Processing Dependency: cronie = 1.4.11-14.el7 for package: cronie-anacron-1.4.11-14.el7.x86_64\n---> Package dbus.x86_64 1:1.6.12-13.el7 will be erased\n---> Package dnsmasq.x86_64 0:2.66-14.el7_1 will be erased\n---> Package fxload.x86_64 0:2002_04_11-16.el7 will be erased\n---> Package hwdata.x86_64 0:0.252-8.1.el7 will be erased\n--> Processing Dependency: hwdata for package: pciutils-3.2.1-4.el7.x86_64\n--> Processing Dependency: hwdata for package: libpciaccess-0.13.4-2.el7.x86_64\n---> Package iputils.x86_64 0:20121221-7.el7 will be erased\n---> Package irqbalance.x86_64 3:1.0.7-5.el7 will be erased\n---> Package libdrm.x86_64 0:2.4.60-3.el7 will be erased\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libgbm-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libEGL-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libGL-10.6.5-3.20150824.el7.x86_64\n---> Package microcode_ctl.x86_64 2:2.1-12.el7 will be erased\n---> Package ntp.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package ntpdate.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package polkit.x86_64 0:0.112-5.el7 will be erased\n--> Processing Dependency: libpolkit-gobject-1.so.0()(64bit) for package: polkit-pkla-compat-0.1-4.el7.x86_64\n---> Package ppp.x86_64 0:2.4.5-33.el7 will be erased\n---> Package rsyslog.x86_64 0:7.4.7-12.el7 will be erased\n---> Package systemd-sysv.x86_64 0:219-19.el7 will be erased\n---> Package trousers.x86_64 0:0.3.13-1.el7 will be erased\n--> Processing Dependency: libtspi.so.1()(64bit) for package: gnutls-3.3.8-12.el7_1.1.x86_64\n---> Package wpa_supplicant.x86_64 1:2.0-17.el7_1 will be erased\n--> Running transaction check\n---> Package cronie-anacron.x86_64 0:1.4.11-14.el7 will be erased\n---> Package gnutls.x86_64 0:3.3.8-12.el7_1.1 will be erased\n--> Processing Dependency: libgnutls.so.28()(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_1_4)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_2_12)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_3_0_0)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n---> Package libpciaccess.x86_64 0:0.13.4-2.el7 will be erased\n---> Package mesa-libEGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libEGL.so.1()(64bit) for package: cairo-1.14.2-1.el7.x86_64\n---> Package mesa-libGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libGL.so.1()(64bit) for package: mesa-libGLU-9.0.0-4.el7.x86_64\n--> Processing Dependency: libGL.so.1()(64bit) for package: 1:qt-x11-4.8.5-12.el7_2.x86_64\n---> Package mesa-libgbm.x86_64 0:10.6.5-3.20150824.el7 will be erased\n---> Package pciutils.x86_64 0:3.2.1-4.el7 will be erased\n--> Processing Dependency: pciutils for package: qt-settings-19-23.5.el7.centos.noarch\n---> Package polkit-pkla-compat.x86_64 0:0.1-4.el7 will be erased\n--> Running transaction check\n---> Package cairo.x86_64 0:1.14.2-1.el7 will be erased\n--> Processing Dependency: cairo(x86-64) >= 1.7.6 for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: gtk2-2.24.28-8.el7.x86_64\n---> Package glib-networking.x86_64 0:2.42.0-1.el7 will be erased\n--> Processing Dependency: glib-networking >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n--> Processing Dependency: glib-networking(x86-64) >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n---> Package mesa-libGLU.x86_64 0:9.0.0-4.el7 will be erased\n---> Package qt-settings.noarch 0:19-23.5.el7.centos will be erased\n--> Processing Dependency: qt-settings for package: 1:qt-4.8.5-12.el7_2.x86_64\n---> Package qt-x11.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Running transaction check\n---> Package gtk2.x86_64 0:2.24.28-8.el7 will be erased\n---> Package libsoup.x86_64 0:2.48.1-3.el7 will be erased\n---> Package pango.x86_64 0:1.36.8-2.el7 will be erased\n---> Package qt.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Processing Dependency: /etc/cron.d for package: crontabs-1.11-6.20121102git.el7.noarch\n--> Restarting Dependency Resolution with new changes.\n--> Running transaction check\n---> Package crontabs.noarch 0:1.11-6.20121102git.el7 will be erased\n--> Finished Dependency Resolution\n"]}
2016-09-23 17:19:59,768 p=27203 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:20:00,868 p=27203 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:20:00,869 p=27203 u=mjohnson |  ...ignoring
2016-09-23 17:20:00,877 p=27203 u=mjohnson |  TASK [remove old ldap configs] *************************************************
2016-09-23 17:20:01,221 p=27203 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:20:01,228 p=27203 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 17:20:02,153 p=27203 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 17:20:04,185 p=27203 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:20:07,178 p=27203 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:20:07,186 p=27203 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:20:07,516 p=27203 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:20:07,523 p=27203 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:20:08,249 p=27203 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:20:08,257 p=27203 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-09-23 17:20:08,526 p=27203 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002406", "end": "2016-09-23 17:20:08.545754", "failed": true, "rc": 1, "start": "2016-09-23 17:20:08.543348", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-09-23 17:20:08,533 p=27203 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:20:08,535 p=27203 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:20:08,535 p=27203 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:20:08,535 p=27203 u=mjohnson |  nifi3.hdp                  : ok=7    changed=3    unreachable=0    failed=1   
2016-09-23 17:24:36,964 p=27294 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:24:36,984 p=27294 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:24:37,933 p=27294 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:24:37,940 p=27294 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:24:38,353 p=27294 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:24:38,360 p=27294 u=mjohnson |  TASK [remove OpenLDAP Server] **************************************************
2016-09-23 17:24:40,294 p=27294 u=mjohnson |  failed: [nifi3.hdp] (item={u'name': u'openldap'}) => {"changed": false, "failed": true, "item": {"name": "openldap"}, "msg": "Error: Trying to remove \"systemd\", which is protected\nError: Trying to remove \"yum\", which is protected\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nResolving Dependencies\n--> Running transaction check\n---> Package openldap.x86_64 0:2.4.40-9.el7_2 will be erased\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: liblber-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-server-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libcurl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhcp-libs-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 12:dhclient-4.2.5-42.el7.centos.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: gnupg2-2.0.22-3.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: openssh-clients-6.6.1p1-22.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: libuser-0.60-7.el7_1.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: 2:postfix-2.10.1-6.el7.x86_64\n--> Processing Dependency: libldap-2.4.so.2()(64bit) for package: sudo-1.8.6p7-16.el7.x86_64\n--> Processing Dependency: libldap_r-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: libslapi-2.4.so.2()(64bit) for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-clients-2.4.40-9.el7_2.x86_64\n--> Processing Dependency: openldap(x86-64) = 2.4.40-9.el7_2 for package: openldap-servers-2.4.40-9.el7_2.x86_64\n--> Running transaction check\n---> Package dhclient.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhclient for package: dracut-network-033-359.el7.x86_64\n--> Processing Dependency: dhclient >= 12:4.1.0 for package: 1:NetworkManager-1.0.6-27.el7.x86_64\n---> Package dhcp-libs.x86_64 12:4.2.5-42.el7.centos will be erased\n--> Processing Dependency: dhcp-libs(x86-64) = 12:4.2.5-42.el7.centos for package: 12:dhcp-common-4.2.5-42.el7.centos.x86_64\n---> Package gnupg2.x86_64 0:2.0.22-3.el7 will be erased\n--> Processing Dependency: gnupg2 for package: gpgme-1.3.2-5.el7.x86_64\n---> Package libcurl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: libcurl = 7.29.0-25.el7.centos for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl >= 7.29.0 for package: python-pycurl-7.19.0-17.el7.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: curl-7.29.0-25.el7.centos.x86_64\n--> Processing Dependency: libcurl.so.4()(64bit) for package: python-pycurl-7.19.0-17.el7.x86_64\n---> Package libuser.x86_64 0:0.60-7.el7_1 will be erased\n--> Processing Dependency: libuser.so.1()(64bit) for package: util-linux-2.23.2-26.el7.x86_64\n--> Processing Dependency: libuser.so.1()(64bit) for package: passwd-0.79-4.el7.x86_64\n---> Package openldap-clients.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openldap-servers.x86_64 0:2.4.40-9.el7_2 will be erased\n---> Package openssh.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-clients.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package openssh-server.x86_64 0:6.6.1p1-22.el7 will be erased\n---> Package postfix.x86_64 2:2.10.1-6.el7 will be erased\n---> Package sudo.x86_64 0:1.8.6p7-16.el7 will be erased\n--> Running transaction check\n---> Package NetworkManager.x86_64 1:1.0.6-27.el7 will be erased\n--> Processing Dependency: NetworkManager = 1:1.0.6-27.el7 for package: 1:NetworkManager-tui-1.0.6-27.el7.x86_64\n--> Processing Dependency: NetworkManager(x86-64) = 1:1.0.6-27.el7 for package: 1:NetworkManager-wifi-1.0.6-27.el7.x86_64\n---> Package curl.x86_64 0:7.29.0-25.el7.centos will be erased\n--> Processing Dependency: curl for package: rpm-4.11.3-17.el7.x86_64\n---> Package dhcp-common.x86_64 12:4.2.5-42.el7.centos will be erased\n---> Package dracut-network.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut-network for package: kexec-tools-2.0.7-38.el7.x86_64\n---> Package gpgme.x86_64 0:1.3.2-5.el7 will be erased\n--> Processing Dependency: libgpgme.so.11()(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.0)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n--> Processing Dependency: libgpgme.so.11(GPGME_1.1)(64bit) for package: pygpgme-0.3-9.el7.x86_64\n---> Package passwd.x86_64 0:0.79-4.el7 will be erased\n---> Package python-pycurl.x86_64 0:7.19.0-17.el7 will be erased\n--> Processing Dependency: python-pycurl for package: python-urlgrabber-3.10-7.el7.noarch\n---> Package util-linux.x86_64 0:2.23.2-26.el7 will be erased\n--> Processing Dependency: /bin/dmesg for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/kill for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/more for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/mount for package: policycoreutils-2.2.5-20.el7.x86_64\n--> Processing Dependency: /bin/mount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: /bin/umount for package: redhat-lsb-core-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: util-linux >= 2.21 for package: dracut-033-359.el7.x86_64\n--> Processing Dependency: util-linux for package: tuned-2.5.1-4.el7.noarch\n--> Processing Dependency: util-linux >= 2.16 for package: initscripts-9.49.30-1.el7.x86_64\n--> Processing Dependency: util-linux >= 2.23 for package: 7:device-mapper-1.02.107-5.el7.x86_64\n--> Processing Dependency: util-linux for package: virt-what-1.13-6.el7.x86_64\n--> Processing Dependency: util-linux for package: os-prober-1.58-5.el7.x86_64\n--> Running transaction check\n---> Package NetworkManager-tui.x86_64 1:1.0.6-27.el7 will be erased\n---> Package NetworkManager-wifi.x86_64 1:1.0.6-27.el7 will be erased\n---> Package device-mapper.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: device-mapper = 7:1.02.107-5.el7 for package: 7:device-mapper-event-1.02.107-5.el7.x86_64\n---> Package dracut.x86_64 0:033-359.el7 will be erased\n--> Processing Dependency: dracut for package: kmod-20-5.el7.x86_64\n--> Processing Dependency: dracut for package: plymouth-scripts-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: dracut = 033-359.el7 for package: dracut-config-rescue-033-359.el7.x86_64\n---> Package initscripts.x86_64 0:9.49.30-1.el7 will be erased\n--> Processing Dependency: initscripts for package: zookeeper_2_0_0_0_579-server-3.4.6.2.0.0.0-579.el6.noarch\n--> Processing Dependency: initscripts >= 8.83-1 for package: plymouth-0.8.9-0.24.20140113.el7.centos.x86_64\n--> Processing Dependency: initscripts >= 5.86-1 for package: kbd-1.15.5-11.el7.x86_64\n---> Package kexec-tools.x86_64 0:2.0.7-38.el7 will be erased\n---> Package os-prober.x86_64 0:1.58-5.el7 will be erased\n--> Processing Dependency: os-prober for package: 1:grub2-tools-2.02-0.29.el7.centos.x86_64\n---> Package policycoreutils.x86_64 0:2.2.5-20.el7 will be erased\n--> Processing Dependency: policycoreutils for package: authconfig-6.2.8-10.el7.x86_64\n---> Package pygpgme.x86_64 0:0.3-9.el7 will be erased\n--> Processing Dependency: pygpgme for package: yum-3.4.3-132.el7.centos.0.1.noarch\n---> Package python-urlgrabber.noarch 0:3.10-7.el7 will be erased\n---> Package redhat-lsb-core.x86_64 0:4.1-27.el7.centos.1 will be erased\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-languages-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-cxx-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-printing-4.1-27.el7.centos.1.x86_64\n--> Processing Dependency: redhat-lsb-core(x86-64) = 4.1-27.el7.centos.1 for package: redhat-lsb-desktop-4.1-27.el7.centos.1.x86_64\n---> Package rpm.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm = 4.11.3-17.el7 for package: rpm-python-4.11.3-17.el7.x86_64\n---> Package tuned.noarch 0:2.5.1-4.el7 will be erased\n---> Package virt-what.x86_64 0:1.13-6.el7 will be erased\n--> Running transaction check\n---> Package authconfig.x86_64 0:6.2.8-10.el7 will be erased\n---> Package device-mapper-event.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: device-mapper-event = 7:1.02.107-5.el7 for package: 7:lvm2-libs-2.02.130-5.el7.x86_64\n---> Package device-mapper-libs.x86_64 7:1.02.107-5.el7 will be erased\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02()(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: kpartx-0.4.9-85.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: cryptsetup-libs-1.6.7-1.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(Base)(64bit) for package: parted-3.1-23.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_100)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_101)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_103)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_104)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:lvm2-2.02.130-5.el7.x86_64\n--> Processing Dependency: libdevmapper.so.1.02(DM_1_02_97)(64bit) for package: 7:device-mapper-event-libs-1.02.107-5.el7.x86_64\n---> Package dracut-config-rescue.x86_64 0:033-359.el7 will be erased\n---> Package grub2-tools.x86_64 1:2.02-0.29.el7.centos will be erased\n--> Processing Dependency: grub2-tools = 1:2.02-0.29.el7.centos for package: 1:grub2-efi-2.02-0.29.el7.centos.x86_64\n---> Package kbd.x86_64 0:1.15.5-11.el7 will be erased\n---> Package kmod.x86_64 0:20-5.el7 will be erased\n--> Processing Dependency: kmod >= 18-4 for package: systemd-219-19.el7.x86_64\n---> Package plymouth.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package plymouth-scripts.x86_64 0:0.8.9-0.24.20140113.el7.centos will be erased\n---> Package redhat-lsb.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-cxx.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-desktop.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-languages.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package redhat-lsb-printing.x86_64 0:4.1-27.el7.centos.1 will be erased\n---> Package rpm-libs.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: librpm.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: librpmio.so.3()(64bit) for package: rpm-build-libs-4.11.3-17.el7.x86_64\n--> Processing Dependency: rpm-libs(x86-64) = 4.11.3-17.el7 for package: rpm-build-libs-4.11.3-17.el7.x86_64\n---> Package rpm-python.x86_64 0:4.11.3-17.el7 will be erased\n--> Processing Dependency: rpm-python for package: ambari-agent-2.4.1.0-22.x86_64\n---> Package yum.noarch 0:3.4.3-132.el7.centos.0.1 will be erased\n--> Processing Dependency: yum >= 3.0 for package: yum-plugin-fastestmirror-1.1.31-34.el7.noarch\n---> Package zookeeper_2_0_0_0_579-server.noarch 0:3.4.6.2.0.0.0-579.el6 will be erased\n--> Running transaction check\n---> Package ambari-agent.x86_64 0:2.4.1.0-22 will be erased\n---> Package cryptsetup-libs.x86_64 0:1.6.7-1.el7 will be erased\n---> Package device-mapper-event-libs.x86_64 7:1.02.107-5.el7 will be erased\n---> Package grub2-efi.x86_64 1:2.02-0.29.el7.centos will be erased\n---> Package kpartx.x86_64 0:0.4.9-85.el7 will be erased\n---> Package lvm2.x86_64 7:2.02.130-5.el7 will be erased\n---> Package lvm2-libs.x86_64 7:2.02.130-5.el7 will be erased\n---> Package parted.x86_64 0:3.1-23.el7 will be erased\n---> Package rpm-build-libs.x86_64 0:4.11.3-17.el7 will be erased\n---> Package systemd.x86_64 0:219-19.el7 will be erased\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: 2:microcode_ctl-2.1-12.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: iputils-20121221-7.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: rsyslog-7.4.7-12.el7.x86_64\n--> Processing Dependency: systemd for package: ppp-2.4.5-33.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: cronie-1.4.11-14.el7.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: dnsmasq-2.66-14.el7_1.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd for package: polkit-0.112-5.el7.x86_64\n--> Processing Dependency: systemd = 219-19.el7 for package: systemd-sysv-219-19.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd for package: hwdata-0.252-8.1.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: audit-2.4.1-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: at-3.1.13-20.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: trousers-0.3.13-1.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 3:irqbalance-1.0.7-5.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: 1:dbus-1.6.12-13.el7.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntpdate-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: ntp-4.2.6p5-22.el7.centos.2.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: systemd-units for package: 1:wpa_supplicant-2.0-17.el7_1.x86_64\n--> Processing Dependency: udev for package: alsa-firmware-1.0.28-2.el7.noarch\n--> Processing Dependency: udev for package: fxload-2002_04_11-16.el7.x86_64\n--> Processing Dependency: udev for package: libdrm-2.4.60-3.el7.x86_64\n--> Processing Dependency: udev for package: alsa-tools-firmware-1.0.28-2.el7.x86_64\n--> Processing Dependency: udev for package: biosdevname-0.6.2-1.el7.x86_64\n--> Processing Dependency: udev for package: aic94xx-firmware-30-6.el7.noarch\n---> Package yum-plugin-fastestmirror.noarch 0:1.1.31-34.el7 will be erased\n--> Running transaction check\n---> Package aic94xx-firmware.noarch 0:30-6.el7 will be erased\n---> Package alsa-firmware.noarch 0:1.0.28-2.el7 will be erased\n---> Package alsa-tools-firmware.x86_64 0:1.0.28-2.el7 will be erased\n---> Package at.x86_64 0:3.1.13-20.el7 will be erased\n---> Package audit.x86_64 0:2.4.1-5.el7 will be erased\n---> Package biosdevname.x86_64 0:0.6.2-1.el7 will be erased\n---> Package cronie.x86_64 0:1.4.11-14.el7 will be erased\n--> Processing Dependency: cronie = 1.4.11-14.el7 for package: cronie-anacron-1.4.11-14.el7.x86_64\n---> Package dbus.x86_64 1:1.6.12-13.el7 will be erased\n---> Package dnsmasq.x86_64 0:2.66-14.el7_1 will be erased\n---> Package fxload.x86_64 0:2002_04_11-16.el7 will be erased\n---> Package hwdata.x86_64 0:0.252-8.1.el7 will be erased\n--> Processing Dependency: hwdata for package: pciutils-3.2.1-4.el7.x86_64\n--> Processing Dependency: hwdata for package: libpciaccess-0.13.4-2.el7.x86_64\n---> Package iputils.x86_64 0:20121221-7.el7 will be erased\n---> Package irqbalance.x86_64 3:1.0.7-5.el7 will be erased\n---> Package libdrm.x86_64 0:2.4.60-3.el7 will be erased\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libgbm-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libEGL-10.6.5-3.20150824.el7.x86_64\n--> Processing Dependency: libdrm.so.2()(64bit) for package: mesa-libGL-10.6.5-3.20150824.el7.x86_64\n---> Package microcode_ctl.x86_64 2:2.1-12.el7 will be erased\n---> Package ntp.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package ntpdate.x86_64 0:4.2.6p5-22.el7.centos.2 will be erased\n---> Package polkit.x86_64 0:0.112-5.el7 will be erased\n--> Processing Dependency: libpolkit-gobject-1.so.0()(64bit) for package: polkit-pkla-compat-0.1-4.el7.x86_64\n---> Package ppp.x86_64 0:2.4.5-33.el7 will be erased\n---> Package rsyslog.x86_64 0:7.4.7-12.el7 will be erased\n---> Package systemd-sysv.x86_64 0:219-19.el7 will be erased\n---> Package trousers.x86_64 0:0.3.13-1.el7 will be erased\n--> Processing Dependency: libtspi.so.1()(64bit) for package: gnutls-3.3.8-12.el7_1.1.x86_64\n---> Package wpa_supplicant.x86_64 1:2.0-17.el7_1 will be erased\n--> Running transaction check\n---> Package cronie-anacron.x86_64 0:1.4.11-14.el7 will be erased\n---> Package gnutls.x86_64 0:3.3.8-12.el7_1.1 will be erased\n--> Processing Dependency: libgnutls.so.28()(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_1_4)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_2_12)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n--> Processing Dependency: libgnutls.so.28(GNUTLS_3_0_0)(64bit) for package: glib-networking-2.42.0-1.el7.x86_64\n---> Package libpciaccess.x86_64 0:0.13.4-2.el7 will be erased\n---> Package mesa-libEGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libEGL.so.1()(64bit) for package: cairo-1.14.2-1.el7.x86_64\n---> Package mesa-libGL.x86_64 0:10.6.5-3.20150824.el7 will be erased\n--> Processing Dependency: libGL.so.1()(64bit) for package: mesa-libGLU-9.0.0-4.el7.x86_64\n--> Processing Dependency: libGL.so.1()(64bit) for package: 1:qt-x11-4.8.5-12.el7_2.x86_64\n---> Package mesa-libgbm.x86_64 0:10.6.5-3.20150824.el7 will be erased\n---> Package pciutils.x86_64 0:3.2.1-4.el7 will be erased\n--> Processing Dependency: pciutils for package: qt-settings-19-23.5.el7.centos.noarch\n---> Package polkit-pkla-compat.x86_64 0:0.1-4.el7 will be erased\n--> Running transaction check\n---> Package cairo.x86_64 0:1.14.2-1.el7 will be erased\n--> Processing Dependency: cairo(x86-64) >= 1.7.6 for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: pango-1.36.8-2.el7.x86_64\n--> Processing Dependency: libcairo.so.2()(64bit) for package: gtk2-2.24.28-8.el7.x86_64\n---> Package glib-networking.x86_64 0:2.42.0-1.el7 will be erased\n--> Processing Dependency: glib-networking >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n--> Processing Dependency: glib-networking(x86-64) >= 2.42.0 for package: libsoup-2.48.1-3.el7.x86_64\n---> Package mesa-libGLU.x86_64 0:9.0.0-4.el7 will be erased\n---> Package qt-settings.noarch 0:19-23.5.el7.centos will be erased\n--> Processing Dependency: qt-settings for package: 1:qt-4.8.5-12.el7_2.x86_64\n---> Package qt-x11.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Running transaction check\n---> Package gtk2.x86_64 0:2.24.28-8.el7 will be erased\n---> Package libsoup.x86_64 0:2.48.1-3.el7 will be erased\n---> Package pango.x86_64 0:1.36.8-2.el7 will be erased\n---> Package qt.x86_64 1:4.8.5-12.el7_2 will be erased\n--> Processing Dependency: /etc/cron.d for package: crontabs-1.11-6.20121102git.el7.noarch\n--> Restarting Dependency Resolution with new changes.\n--> Running transaction check\n---> Package crontabs.noarch 0:1.11-6.20121102git.el7 will be erased\n--> Finished Dependency Resolution\n"]}
2016-09-23 17:24:41,245 p=27294 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:24:42,325 p=27294 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:24:42,326 p=27294 u=mjohnson |  ...ignoring
2016-09-23 17:24:42,333 p=27294 u=mjohnson |  TASK [remove old ldap configs] *************************************************
2016-09-23 17:24:42,682 p=27294 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:24:42,689 p=27294 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 17:24:43,594 p=27294 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 17:24:45,669 p=27294 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:24:48,604 p=27294 u=mjohnson |  changed: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:24:48,612 p=27294 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:24:48,953 p=27294 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:24:48,962 p=27294 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:24:49,666 p=27294 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:24:49,673 p=27294 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-09-23 17:24:49,940 p=27294 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002469", "end": "2016-09-23 17:24:49.955522", "failed": true, "rc": 1, "start": "2016-09-23 17:24:49.953053", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-09-23 17:24:49,946 p=27294 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:24:49,948 p=27294 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:24:49,948 p=27294 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:24:49,948 p=27294 u=mjohnson |  nifi3.hdp                  : ok=7    changed=4    unreachable=0    failed=1   
2016-09-23 17:25:30,550 p=27372 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:25:30,568 p=27372 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:25:31,299 p=27372 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:25:31,307 p=27372 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:25:31,725 p=27372 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:25:31,731 p=27372 u=mjohnson |  TASK [remove old ldap configs] *************************************************
2016-09-23 17:25:32,065 p=27372 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:25:32,073 p=27372 u=mjohnson |  TASK [Install OpenLDAP Server] *************************************************
2016-09-23 17:25:33,118 p=27372 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap'})
2016-09-23 17:25:33,995 p=27372 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap-clients'})
2016-09-23 17:25:34,882 p=27372 u=mjohnson |  ok: [nifi3.hdp] => (item={u'name': u'openldap-servers'})
2016-09-23 17:25:34,890 p=27372 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:25:35,245 p=27372 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:25:35,253 p=27372 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:25:35,956 p=27372 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "failed": true, "msg": "Destination directory /var/lib/ldap does not exist"}
2016-09-23 17:25:35,962 p=27372 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:25:35,963 p=27372 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:25:35,964 p=27372 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:25:35,964 p=27372 u=mjohnson |  nifi3.hdp                  : ok=5    changed=2    unreachable=0    failed=1   
2016-09-23 17:27:47,586 p=27451 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:27:47,613 p=27451 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:27:48,633 p=27451 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:27:48,642 p=27451 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:27:49,044 p=27451 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:27:49,051 p=27451 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:27:49,385 p=27451 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:27:49,394 p=27451 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:27:50,095 p=27451 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:27:50,102 p=27451 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-23 17:27:50,554 p=27451 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:27:50,562 p=27451 u=mjohnson |  TASK [Configure LDAP cosine] ***************************************************
2016-09-23 17:27:50,831 p=27451 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f cosine.ldif", "delta": "0:00:00.004397", "end": "2016-09-23 17:27:50.849085", "failed": true, "rc": 1, "start": "2016-09-23 17:27:50.844688", "stderr": "cosine.ldif: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": []}
2016-09-23 17:27:50,838 p=27451 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:27:50,839 p=27451 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:27:50,839 p=27451 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:27:50,839 p=27451 u=mjohnson |  nifi3.hdp                  : ok=5    changed=3    unreachable=0    failed=1   
2016-09-23 17:33:26,945 p=27512 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:33:26,966 p=27512 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:33:27,915 p=27512 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:33:27,923 p=27512 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:33:28,427 p=27512 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:33:28,434 p=27512 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:33:28,773 p=27512 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:33:28,783 p=27512 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:33:29,432 p=27512 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:33:29,439 p=27512 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-23 17:33:29,882 p=27512 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:33:29,891 p=27512 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-23 17:33:30,540 p=27512 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:33:30,548 p=27512 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-23 17:33:30,820 p=27512 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007602", "end": "2016-09-23 17:33:30.836758", "failed": true, "rc": 19, "start": "2016-09-23 17:33:30.829156", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-23 17:33:30,827 p=27512 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:33:30,829 p=27512 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:33:30,829 p=27512 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:33:30,829 p=27512 u=mjohnson |  nifi3.hdp                  : ok=6    changed=4    unreachable=0    failed=1   
2016-09-23 17:35:07,300 p=27600 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-23 17:35:07,327 p=27600 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-23 17:35:08,285 p=27600 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:35:08,292 p=27600 u=mjohnson |  TASK [shutdown the ldap service] ***********************************************
2016-09-23 17:35:08,787 p=27600 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:35:08,794 p=27600 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-23 17:35:09,131 p=27600 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:35:09,141 p=27600 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-23 17:35:09,798 p=27600 u=mjohnson |  ok: [nifi3.hdp]
2016-09-23 17:35:09,807 p=27600 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-23 17:35:10,237 p=27600 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:35:10,245 p=27600 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-23 17:35:10,892 p=27600 u=mjohnson |  changed: [nifi3.hdp]
2016-09-23 17:35:10,899 p=27600 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-23 17:35:11,172 p=27600 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007020", "end": "2016-09-23 17:35:11.189590", "failed": true, "rc": 19, "start": "2016-09-23 17:35:11.182570", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-23 17:35:11,178 p=27600 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-23 17:35:11,179 p=27600 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-23 17:35:11,179 p=27600 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-23 17:35:11,179 p=27600 u=mjohnson |  nifi3.hdp                  : ok=6    changed=4    unreachable=0    failed=1   
2016-09-24 09:46:02,174 p=30382 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-24 09:46:02,204 p=30382 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-24 09:46:03,253 p=30382 u=mjohnson |  ok: [nifi3.hdp]
2016-09-24 09:46:03,260 p=30382 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-24 09:46:03,675 p=30382 u=mjohnson |  ok: [nifi3.hdp]
2016-09-24 09:46:03,687 p=30382 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-24 09:46:04,352 p=30382 u=mjohnson |  ok: [nifi3.hdp]
2016-09-24 09:46:04,360 p=30382 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-24 09:46:04,698 p=30382 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007021", "end": "2016-09-24 09:46:04.672283", "failed": true, "rc": 19, "start": "2016-09-24 09:46:04.665262", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-24 09:46:04,705 p=30382 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-24 09:46:04,706 p=30382 u=mjohnson |   [WARNING]: Could not create retry file 'installOpenLDAP.retry'.         [Errno
2] No such file or directory: ''

2016-09-24 09:46:04,707 p=30382 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-24 09:46:04,707 p=30382 u=mjohnson |  nifi3.hdp                  : ok=3    changed=0    unreachable=0    failed=1   
2016-09-30 12:59:37,667 p=25758 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 12:59:37,927 p=25758 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 12:59:37,927 p=25758 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 12:59:37,934 p=25758 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 12:59:37,966 p=25758 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 12:59:39,162 p=25758 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 12:59:39,169 p=25758 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 12:59:39,170 p=25758 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 12:59:39,504 p=25758 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.005002", "end": "2016-09-30 12:59:39.472727", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 12:59:39.467725", "stderr": "", "stdout": "{SSHA}4tdzAo10Xv/gK+Ftk0yf43e9NVeh8p5Z", "stdout_lines": ["{SSHA}4tdzAo10Xv/gK+Ftk0yf43e9NVeh8p5Z"], "warnings": []}
2016-09-30 12:59:39,515 p=25758 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 12:59:39,515 p=25758 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 12:59:40,232 p=25758 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "46979a2869dddf4fbc8520cf9381b31a478fbd1f", "dest": "/var/lib/ldap/DB_CONFIG", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475254779.54-115887541965550/source", "validate": null}}, "md5sum": "d224de6a5308c1bcf328cb8e94c5efd6", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "src": "/root/.ansible/tmp/ansible-tmp-1475254779.54-115887541965550/source", "state": "file", "uid": 0}
2016-09-30 12:59:40,239 p=25758 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-09-30 12:59:40,239 p=25758 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:29
2016-09-30 12:59:40,511 p=25758 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002823", "end": "2016-09-30 12:59:40.480092", "failed": true, "invocation": {"module_args": {"_raw_params": "chown ldap:ldap /var/lib/ldap/*", "_uses_shell": false, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 1, "start": "2016-09-30 12:59:40.477269", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-09-30 12:59:40,517 p=25758 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 12:59:40,518 p=25758 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 12:59:40,518 p=25758 u=mjohnson |  nifi3.hdp                  : ok=3    changed=2    unreachable=0    failed=1   
2016-09-30 13:01:13,849 p=25974 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:01:13,962 p=25974 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:01:13,962 p=25974 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:01:13,968 p=25974 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:01:13,987 p=25974 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:01:15,004 p=25974 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:01:15,012 p=25974 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:01:15,012 p=25974 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:01:15,346 p=25974 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.004602", "end": "2016-09-30 13:01:15.317458", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:01:15.312856", "stderr": "", "stdout": "{SSHA}ycf0CacyZJJDLyV1bRxCC6j4YwW/4QEa", "stdout_lines": ["{SSHA}ycf0CacyZJJDLyV1bRxCC6j4YwW/4QEa"], "warnings": []}
2016-09-30 13:01:15,354 p=25974 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:01:15,354 p=25974 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:01:16,011 p=25974 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 0, "group": "root", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "root", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 0}
2016-09-30 13:01:16,019 p=25974 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-09-30 13:01:16,019 p=25974 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:29
2016-09-30 13:01:16,282 p=25974 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002488", "end": "2016-09-30 13:01:16.253121", "failed": true, "invocation": {"module_args": {"_raw_params": "chown ldap:ldap /var/lib/ldap/*", "_uses_shell": false, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 1, "start": "2016-09-30 13:01:16.250633", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-09-30 13:01:16,288 p=25974 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:01:16,288 p=25974 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:01:16,288 p=25974 u=mjohnson |  nifi3.hdp                  : ok=3    changed=1    unreachable=0    failed=1   
2016-09-30 13:07:35,244 p=26713 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:07:35,360 p=26713 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:07:35,360 p=26713 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:07:35,366 p=26713 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:07:35,384 p=26713 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:07:36,549 p=26713 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:07:36,558 p=26713 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:07:36,558 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:07:36,905 p=26713 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.004862", "end": "2016-09-30 13:07:36.875606", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:07:36.870744", "stderr": "", "stdout": "{SSHA}JLdlNOrL6seCDrWNCdmCqQYtDpv7u5fa", "stdout_lines": ["{SSHA}JLdlNOrL6seCDrWNCdmCqQYtDpv7u5fa"], "warnings": []}
2016-09-30 13:07:36,912 p=26713 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:07:36,912 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:07:37,562 p=26713 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 55, "group": "ldap", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "ldap", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 55}
2016-09-30 13:07:37,570 p=26713 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-30 13:07:37,570 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:31
2016-09-30 13:07:37,987 p=26713 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "slapd", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "slapd", "state": "started"}
2016-09-30 13:07:37,995 p=26713 u=mjohnson |  TASK [Configure LDAP cosine] ***************************************************
2016-09-30 13:07:37,995 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:33
2016-09-30 13:07:38,273 p=26713 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/cosine.ldif", "delta": "0:00:00.007905", "end": "2016-09-30 13:07:38.242896", "invocation": {"module_args": {"_raw_params": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/cosine.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:07:38.234991", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0", "stdout": "adding new entry \"cn=cosine,cn=schema,cn=config\"", "stdout_lines": ["adding new entry \"cn=cosine,cn=schema,cn=config\""], "warnings": []}
2016-09-30 13:07:38,280 p=26713 u=mjohnson |  TASK [Configure LDAP nis] ******************************************************
2016-09-30 13:07:38,280 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:35
2016-09-30 13:07:38,556 p=26713 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/nis.ldif", "delta": "0:00:00.007115", "end": "2016-09-30 13:07:38.527797", "invocation": {"module_args": {"_raw_params": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/nis.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:07:38.520682", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0", "stdout": "adding new entry \"cn=nis,cn=schema,cn=config\"", "stdout_lines": ["adding new entry \"cn=nis,cn=schema,cn=config\""], "warnings": []}
2016-09-30 13:07:38,563 p=26713 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-30 13:07:38,564 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:37
2016-09-30 13:07:39,217 p=26713 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "a9c420ca0471e1460920d50ce4ef9866b398274e", "dest": "//etc/openldap/changes.ldif", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "//etc/openldap/changes.ldif", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "hdp_ldapConfig.ldif.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475255258.6-175022876866098/source", "validate": null}}, "md5sum": "6cd5a5d1f080b998a4f81911e1c80c8b", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:etc_t:s0", "size": 1170, "src": "/root/.ansible/tmp/ansible-tmp-1475255258.6-175022876866098/source", "state": "file", "uid": 0}
2016-09-30 13:07:39,224 p=26713 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-30 13:07:39,224 p=26713 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:39
2016-09-30 13:07:39,495 p=26713 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007386", "end": "2016-09-30 13:07:39.468190", "failed": true, "invocation": {"module_args": {"_raw_params": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 19, "start": "2016-09-30 13:07:39.460804", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-30 13:07:39,501 p=26713 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:07:39,501 p=26713 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:07:39,501 p=26713 u=mjohnson |  nifi3.hdp                  : ok=7    changed=4    unreachable=0    failed=1   
2016-09-30 13:09:46,283 p=27012 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:09:46,391 p=27012 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:09:46,391 p=27012 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:09:46,398 p=27012 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:09:46,415 p=27012 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:09:47,378 p=27012 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:09:47,385 p=27012 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:09:47,385 p=27012 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:09:47,751 p=27012 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.004935", "end": "2016-09-30 13:09:47.720529", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:09:47.715594", "stderr": "", "stdout": "{SSHA}VGkwyz0p88ZmQUdbSzaEzGprMwzFUFwN", "stdout_lines": ["{SSHA}VGkwyz0p88ZmQUdbSzaEzGprMwzFUFwN"], "warnings": []}
2016-09-30 13:09:47,760 p=27012 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:09:47,760 p=27012 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:09:48,418 p=27012 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 55, "group": "ldap", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "ldap", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 55}
2016-09-30 13:09:48,425 p=27012 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-30 13:09:48,425 p=27012 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:31
2016-09-30 13:09:48,841 p=27012 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "slapd", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "slapd", "state": "started"}
2016-09-30 13:09:48,848 p=27012 u=mjohnson |  TASK [Configure LDAP cosine] ***************************************************
2016-09-30 13:09:48,848 p=27012 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:33
2016-09-30 13:09:49,116 p=27012 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/cosine.ldif", "delta": "0:00:00.007161", "end": "2016-09-30 13:09:49.088609", "failed": true, "invocation": {"module_args": {"_raw_params": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/cosine.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 80, "start": "2016-09-30 13:09:49.081448", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_add: Other (e.g., implementation specific) error (80)\n\tadditional info: olcAttributeTypes: Duplicate attributeType: \"0.9.2342.19200300.100.1.2\"", "stdout": "adding new entry \"cn=cosine,cn=schema,cn=config\"", "stdout_lines": ["adding new entry \"cn=cosine,cn=schema,cn=config\""], "warnings": []}
2016-09-30 13:09:49,123 p=27012 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:09:49,123 p=27012 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:09:49,124 p=27012 u=mjohnson |  nifi3.hdp                  : ok=4    changed=1    unreachable=0    failed=1   
2016-09-30 13:10:19,302 p=27118 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:10:19,411 p=27118 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:10:19,411 p=27118 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:10:19,418 p=27118 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:10:19,436 p=27118 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:10:20,192 p=27118 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:10:20,200 p=27118 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:10:20,200 p=27118 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:10:20,533 p=27118 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.004983", "end": "2016-09-30 13:10:20.503294", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:10:20.498311", "stderr": "", "stdout": "{SSHA}pRMofIsBwot+fzX6XWuQjnFZetx7bRZ3", "stdout_lines": ["{SSHA}pRMofIsBwot+fzX6XWuQjnFZetx7bRZ3"], "warnings": []}
2016-09-30 13:10:20,541 p=27118 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:10:20,541 p=27118 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:10:21,205 p=27118 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 55, "group": "ldap", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "ldap", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 55}
2016-09-30 13:10:21,212 p=27118 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-30 13:10:21,212 p=27118 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:31
2016-09-30 13:10:21,619 p=27118 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "slapd", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "slapd", "state": "started"}
2016-09-30 13:10:21,626 p=27118 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-30 13:10:21,627 p=27118 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:37
2016-09-30 13:10:22,277 p=27118 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "4b131b54ae8d96151097c446785503b92e6c9255", "dest": "//etc/openldap/changes.ldif", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "//etc/openldap/changes.ldif", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "hdp_ldapConfig.ldif.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475255421.66-87558897882071/source", "validate": null}}, "md5sum": "4c7a410821f6667b45472684fed00305", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:etc_t:s0", "size": 1170, "src": "/root/.ansible/tmp/ansible-tmp-1475255421.66-87558897882071/source", "state": "file", "uid": 0}
2016-09-30 13:10:22,284 p=27118 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-30 13:10:22,284 p=27118 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:39
2016-09-30 13:10:22,561 p=27118 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007691", "end": "2016-09-30 13:10:22.528674", "failed": true, "invocation": {"module_args": {"_raw_params": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 19, "start": "2016-09-30 13:10:22.520983", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-30 13:10:22,567 p=27118 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:10:22,568 p=27118 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:10:22,568 p=27118 u=mjohnson |  nifi3.hdp                  : ok=5    changed=2    unreachable=0    failed=1   
2016-09-30 13:11:21,856 p=27297 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:11:21,962 p=27297 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:11:21,962 p=27297 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:11:21,969 p=27297 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:11:21,987 p=27297 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:11:23,058 p=27297 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:11:23,067 p=27297 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:11:23,067 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:11:23,428 p=27297 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.005038", "end": "2016-09-30 13:11:23.398424", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:11:23.393386", "stderr": "", "stdout": "{SSHA}GLbdP9nWjrioc1vHVy6AIgGcLW3FNEr6", "stdout_lines": ["{SSHA}GLbdP9nWjrioc1vHVy6AIgGcLW3FNEr6"], "warnings": []}
2016-09-30 13:11:23,437 p=27297 u=mjohnson |  TASK [debug] *******************************************************************
2016-09-30 13:11:23,437 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:11:23,475 p=27297 u=mjohnson |  ok: [nifi3.hdp] => {
    "msg": "Password = {u'changed': True, u'end': u'2016-09-30 13:11:23.398424', u'stdout': u'{SSHA}GLbdP9nWjrioc1vHVy6AIgGcLW3FNEr6', u'cmd': u'slappasswd -s hadoop', u'start': u'2016-09-30 13:11:23.393386', u'delta': u'0:00:00.005038', u'stderr': u'', u'rc': 0, 'stdout_lines': [u'{SSHA}GLbdP9nWjrioc1vHVy6AIgGcLW3FNEr6'], u'warnings': []}"
}
2016-09-30 13:11:23,482 p=27297 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:11:23,483 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:28
2016-09-30 13:11:24,146 p=27297 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 55, "group": "ldap", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "ldap", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 55}
2016-09-30 13:11:24,153 p=27297 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-30 13:11:24,153 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:32
2016-09-30 13:11:24,572 p=27297 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "slapd", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "slapd", "state": "started"}
2016-09-30 13:11:24,579 p=27297 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-30 13:11:24,579 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:38
2016-09-30 13:11:25,214 p=27297 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "6839a0490ba284b4e42f15ae9cf93d792f4856cd", "dest": "//etc/openldap/changes.ldif", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "//etc/openldap/changes.ldif", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "hdp_ldapConfig.ldif.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475255484.61-77445816612799/source", "validate": null}}, "md5sum": "87489cc469edcfb986ade6e4b90e1679", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:etc_t:s0", "size": 1170, "src": "/root/.ansible/tmp/ansible-tmp-1475255484.61-77445816612799/source", "state": "file", "uid": 0}
2016-09-30 13:11:25,221 p=27297 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-30 13:11:25,221 p=27297 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:40
2016-09-30 13:11:25,493 p=27297 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.007610", "end": "2016-09-30 13:11:25.462859", "failed": true, "invocation": {"module_args": {"_raw_params": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 19, "start": "2016-09-30 13:11:25.455249", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Constraint violation (19)\n\tadditional info: <olcRootPW> extra cruft after <password>", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-09-30 13:11:25,499 p=27297 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:11:25,499 p=27297 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:11:25,499 p=27297 u=mjohnson |  nifi3.hdp                  : ok=6    changed=2    unreachable=0    failed=1   
2016-09-30 13:14:58,965 p=27748 u=mjohnson |  Using /etc/ansible/ansible.cfg as config file
2016-09-30 13:14:59,069 p=27748 u=mjohnson |  PLAYBOOK: installOpenLDAP.yml **************************************************
2016-09-30 13:14:59,070 p=27748 u=mjohnson |  1 plays in installOpenLDAP.yml
2016-09-30 13:14:59,076 p=27748 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-09-30 13:14:59,094 p=27748 u=mjohnson |  TASK [setup] *******************************************************************
2016-09-30 13:15:00,147 p=27748 u=mjohnson |  ok: [nifi3.hdp]
2016-09-30 13:15:00,155 p=27748 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-09-30 13:15:00,155 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:24
2016-09-30 13:15:00,498 p=27748 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "slappasswd -s hadoop", "delta": "0:00:00.005103", "end": "2016-09-30 13:15:00.468146", "invocation": {"module_args": {"_raw_params": "slappasswd -s hadoop", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:15:00.463043", "stderr": "", "stdout": "{SSHA}EYDN3+Iczvo8ngLQD5k6owJUVt/7V28V", "stdout_lines": ["{SSHA}EYDN3+Iczvo8ngLQD5k6owJUVt/7V28V"], "warnings": []}
2016-09-30 13:15:00,505 p=27748 u=mjohnson |  TASK [debug] *******************************************************************
2016-09-30 13:15:00,505 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:27
2016-09-30 13:15:00,542 p=27748 u=mjohnson |  ok: [nifi3.hdp] => {
    "msg": "Password = {u'changed': True, u'end': u'2016-09-30 13:15:00.468146', u'stdout': u'{SSHA}EYDN3+Iczvo8ngLQD5k6owJUVt/7V28V', u'cmd': u'slappasswd -s hadoop', u'start': u'2016-09-30 13:15:00.463043', u'delta': u'0:00:00.005103', u'stderr': u'', u'rc': 0, 'stdout_lines': [u'{SSHA}EYDN3+Iczvo8ngLQD5k6owJUVt/7V28V'], u'warnings': []}"
}
2016-09-30 13:15:00,550 p=27748 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-09-30 13:15:00,550 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:28
2016-09-30 13:15:01,213 p=27748 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "diff": {"after": {"path": "/var/lib/ldap/DB_CONFIG"}, "before": {"path": "/var/lib/ldap/DB_CONFIG"}}, "gid": 55, "group": "ldap", "invocation": {"module_args": {"backup": null, "content": null, "delimiter": null, "dest": "/var/lib/ldap/DB_CONFIG", "diff_peek": null, "directory_mode": null, "follow": true, "force": false, "group": null, "mode": null, "original_basename": "DB_CONFIG.example.j2", "owner": null, "path": "/var/lib/ldap/DB_CONFIG", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": null, "validate": null}}, "mode": "0644", "owner": "ldap", "path": "/var/lib/ldap/DB_CONFIG", "secontext": "system_u:object_r:slapd_db_t:s0", "size": 845, "state": "file", "uid": 55}
2016-09-30 13:15:01,220 p=27748 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-09-30 13:15:01,220 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:32
2016-09-30 13:15:01,634 p=27748 u=mjohnson |  ok: [nifi3.hdp] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "slapd", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "slapd", "state": "started"}
2016-09-30 13:15:01,643 p=27748 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-09-30 13:15:01,643 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:38
2016-09-30 13:15:02,295 p=27748 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "b10654c927259f2c72f9da78c842f7ba70cce425", "dest": "//etc/openldap/changes.ldif", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "//etc/openldap/changes.ldif", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "hdp_ldapConfig.ldif.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475255701.68-143360685397359/source", "validate": null}}, "md5sum": "d1296dd380faba3fbeb7b47a18adeb28", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:etc_t:s0", "size": 890, "src": "/root/.ansible/tmp/ansible-tmp-1475255701.68-143360685397359/source", "state": "file", "uid": 0}
2016-09-30 13:15:02,303 p=27748 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-30 13:15:02,303 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:40
2016-09-30 13:15:02,596 p=27748 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.025198", "end": "2016-09-30 13:15:02.565347", "invocation": {"module_args": {"_raw_params": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2016-09-30 13:15:02.540149", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"olcDatabase={2}hdb,cn=config\"\n\nmodifying entry \"cn=config\"\n\nmodifying entry \"cn=config\"\n\nmodifying entry \"cn=config\"\n\nmodifying entry \"olcDatabase={1}monitor,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"olcDatabase={2}hdb,cn=config\"", "", "modifying entry \"cn=config\"", "", "modifying entry \"cn=config\"", "", "modifying entry \"cn=config\"", "", "modifying entry \"olcDatabase={1}monitor,cn=config\""], "warnings": []}
2016-09-30 13:15:02,603 p=27748 u=mjohnson |  TASK [Update configuration for targeted base] **********************************
2016-09-30 13:15:02,603 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:42
2016-09-30 13:15:03,200 p=27748 u=mjohnson |  changed: [nifi3.hdp] => {"changed": true, "checksum": "8e5ac0d33d76707f97639a595dec00eb08107373", "dest": "//etc/openldap/base.ldif", "gid": 0, "group": "root", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "//etc/openldap/base.ldif", "directory_mode": null, "follow": true, "force": true, "group": null, "mode": null, "original_basename": "base.ldif.j2", "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/root/.ansible/tmp/ansible-tmp-1475255702.63-46576799338854/source", "validate": null}}, "md5sum": "b05df248830161fdb9dd3e232322e3a7", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:etc_t:s0", "size": 274, "src": "/root/.ansible/tmp/ansible-tmp-1475255702.63-46576799338854/source", "state": "file", "uid": 0}
2016-09-30 13:15:03,208 p=27748 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-09-30 13:15:03,208 p=27748 u=mjohnson |  task path: /Users/mjohnson/openLDAP/installOpenLDAP.yml:44
2016-09-30 13:15:03,496 p=27748 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/base.ldif", "delta": "0:00:00.011349", "end": "2016-09-30 13:15:03.466827", "failed": true, "invocation": {"module_args": {"_raw_params": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/base.ldif", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 247, "start": "2016-09-30 13:15:03.455478", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldapmodify: modify operation type is missing at line 2, entry \"dc=HORTONOWORKS,dc=com\"", "stdout": "", "stdout_lines": [], "warnings": []}
2016-09-30 13:15:03,502 p=27748 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-09-30 13:15:03,503 p=27748 u=mjohnson |  PLAY RECAP *********************************************************************
2016-09-30 13:15:03,503 p=27748 u=mjohnson |  nifi3.hdp                  : ok=8    changed=4    unreachable=0    failed=1   
2016-10-02 11:00:38,357 p=57203 u=mjohnson |  nifi3.hdp | FAILED | rc=1 >>
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * base: mirror.fusioncloud.co
 * epel: mirrors.mit.edu
 * extras: mirrors.tripadvisor.com
 * updates: mirror.eboundhost.com
Resolving Dependencies
--> Running transaction check
---> Package openldap-clients.x86_64 0:2.4.40-9.el7_2 will be reinstalled
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch         Version                Repository     Size
================================================================================
Reinstalling:
 openldap-clients       x86_64       2.4.40-9.el7_2         updates       186 k

Transaction Summary
================================================================================
Reinstall  1 Package

Total download size: 186 k
Installed size: 570 k
Is this ok [y/d/N]: Exiting on user command
Your transaction was saved, rerun it with:
 yum load-transaction /tmp/yum_save_tx.2016-10-02.11-00.Son2hg.yumtx

2016-10-02 11:00:42,651 p=57203 u=mjohnson |  nifi2.hdp | FAILED | rc=1 >>
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * base: mirror.net.cen.ct.gov
 * epel: mirror.math.princeton.edu
 * extras: mirrors.seas.harvard.edu
 * updates: mirror.eboundhost.com
Package(s) openldap-clients available, but not installed.No Match for argument: openldap-clients
Error: Nothing to do

2016-10-02 11:00:44,287 p=57203 u=mjohnson |  nifi1.hdp | FAILED | rc=1 >>
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * base: mirror.net.cen.ct.gov
 * epel: mirror.cs.princeton.edu
 * extras: centos.mirrors.tds.net
 * updates: mirror.eboundhost.com
Resolving Dependencies
--> Running transaction check
---> Package openldap-clients.x86_64 0:2.4.40-9.el7_2 will be reinstalled
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch         Version                Repository     Size
================================================================================
Reinstalling:
 openldap-clients       x86_64       2.4.40-9.el7_2         updates       186 k

Transaction Summary
================================================================================
Reinstall  1 Package

Total download size: 186 k
Installed size: 570 k
Is this ok [y/d/N]: Exiting on user command
Your transaction was saved, rerun it with:
 yum load-transaction /tmp/yum_save_tx.2016-10-02.11-00.6I6wea.yumtx

2016-10-02 11:02:07,447 p=57391 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 11:02:07,464 p=57391 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 11:02:09,605 p=57391 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:02:09,614 p=57391 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 11:02:10,560 p=57391 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:02:10,570 p=57391 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 11:02:10,614 p=57391 u=mjohnson |  ok: [nifi3.hdp] => {
    "msg": "Password = {SSHA}SxKT9VSrOu0ltr17/RrzL71iGAcsync9"
}
2016-10-02 11:02:10,624 p=57391 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 11:02:12,963 p=57391 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:02:12,971 p=57391 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-10-02 11:02:14,196 p=57391 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:02:14,204 p=57391 u=mjohnson |  TASK [Configure LDAP cosine] ***************************************************
2016-10-02 11:02:15,132 p=57391 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/cosine.ldif", "delta": "0:00:00.029506", "end": "2016-10-02 11:02:15.052571", "failed": true, "rc": 80, "start": "2016-10-02 11:02:15.023065", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_add: Other (e.g., implementation specific) error (80)\n\tadditional info: olcAttributeTypes: Duplicate attributeType: \"0.9.2342.19200300.100.1.2\"", "stdout": "adding new entry \"cn=cosine,cn=schema,cn=config\"", "stdout_lines": ["adding new entry \"cn=cosine,cn=schema,cn=config\""], "warnings": []}
2016-10-02 11:02:15,139 p=57391 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 11:02:15,139 p=57391 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 11:02:15,139 p=57391 u=mjohnson |  nifi3.hdp                  : ok=5    changed=3    unreachable=0    failed=1   
2016-10-02 11:05:02,722 p=57634 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 11:05:02,740 p=57634 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 11:05:05,011 p=57634 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:05,019 p=57634 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 11:05:05,972 p=57634 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:05:05,980 p=57634 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 11:05:06,020 p=57634 u=mjohnson |  ok: [nifi3.hdp] => {
    "msg": "Password = {SSHA}OzFSUHLOsTS9TpONjsd+V95iaBXXciyD"
}
2016-10-02 11:05:06,027 p=57634 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 11:05:07,896 p=57634 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:07,904 p=57634 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-10-02 11:05:08,942 p=57634 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:08,951 p=57634 u=mjohnson |  TASK [Configure LDAP nis] ******************************************************
2016-10-02 11:05:09,889 p=57634 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapadd -Y EXTERNAL -H ldapi:/// -D \"cn=config\" -f /etc/openldap/schema/nis.ldif", "delta": "0:00:00.027146", "end": "2016-10-02 11:05:09.800427", "failed": true, "rc": 80, "start": "2016-10-02 11:05:09.773281", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_add: Other (e.g., implementation specific) error (80)\n\tadditional info: olcAttributeTypes: Duplicate attributeType: \"1.3.6.1.1.1.1.2\"", "stdout": "adding new entry \"cn=nis,cn=schema,cn=config\"", "stdout_lines": ["adding new entry \"cn=nis,cn=schema,cn=config\""], "warnings": []}
2016-10-02 11:05:09,896 p=57634 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 11:05:09,896 p=57634 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 11:05:09,896 p=57634 u=mjohnson |  nifi3.hdp                  : ok=5    changed=1    unreachable=0    failed=1   
2016-10-02 11:05:27,456 p=57705 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 11:05:27,473 p=57705 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 11:05:28,974 p=57705 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:28,982 p=57705 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 11:05:29,937 p=57705 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:05:29,945 p=57705 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 11:05:29,977 p=57705 u=mjohnson |  ok: [nifi3.hdp] => {
    "msg": "Password = {SSHA}qYhSnYOnxA4BTzXh676HjCVaeVIuncJi"
}
2016-10-02 11:05:29,985 p=57705 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 11:05:31,878 p=57705 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:31,886 p=57705 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-10-02 11:05:32,951 p=57705 u=mjohnson |  ok: [nifi3.hdp]
2016-10-02 11:05:32,960 p=57705 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-10-02 11:05:35,263 p=57705 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:05:35,271 p=57705 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-10-02 11:05:36,549 p=57705 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:05:36,558 p=57705 u=mjohnson |  TASK [Update configuration for targeted base] **********************************
2016-10-02 11:05:38,768 p=57705 u=mjohnson |  changed: [nifi3.hdp]
2016-10-02 11:05:38,777 p=57705 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-10-02 11:05:39,707 p=57705 u=mjohnson |  fatal: [nifi3.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/base.ldif", "delta": "0:00:00.011383", "end": "2016-10-02 11:05:39.616011", "failed": true, "rc": 247, "start": "2016-10-02 11:05:39.604628", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldapmodify: modify operation type is missing at line 2, entry \"dc=hortonworks,dc=hdp\"", "stdout": "", "stdout_lines": [], "warnings": []}
2016-10-02 11:05:39,714 p=57705 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 11:05:39,715 p=57705 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 11:05:39,715 p=57705 u=mjohnson |  nifi3.hdp                  : ok=8    changed=4    unreachable=0    failed=1   
2016-10-02 15:16:01,256 p=74233 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 15:16:01,289 p=74233 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 15:16:03,431 p=74233 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:16:03,439 p=74233 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 15:16:04,554 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:04,563 p=74233 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 15:16:04,600 p=74233 u=mjohnson |  ok: [nifi2.hdp] => {
    "msg": "Password = {SSHA}mNGzoW5K8cLtQrxsaxb6PwQ9zu6sWnx5"
}
2016-10-02 15:16:04,608 p=74233 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 15:16:06,969 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:06,977 p=74233 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-10-02 15:16:08,208 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:08,215 p=74233 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-10-02 15:16:10,454 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:10,462 p=74233 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-10-02 15:16:11,376 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:11,383 p=74233 u=mjohnson |  TASK [Update configuration for targeted base] **********************************
2016-10-02 15:16:13,622 p=74233 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:16:13,630 p=74233 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-10-02 15:16:14,529 p=74233 u=mjohnson |  fatal: [nifi2.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/base.ldif", "delta": "0:00:00.009754", "end": "2016-10-02 15:16:14.368934", "failed": true, "rc": 247, "start": "2016-10-02 15:16:14.359180", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldapmodify: modify operation type is missing at line 2, entry \"dc=hortonworks,dc=hdp\"", "stdout": "", "stdout_lines": [], "warnings": []}
2016-10-02 15:16:14,536 p=74233 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 15:16:14,536 p=74233 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 15:16:14,537 p=74233 u=mjohnson |  nifi2.hdp                  : ok=8    changed=6    unreachable=0    failed=1   
2016-10-02 15:19:57,036 p=74585 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 15:19:57,054 p=74585 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 15:19:59,154 p=74585 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:19:59,164 p=74585 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 15:20:00,116 p=74585 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:20:00,125 p=74585 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 15:20:00,163 p=74585 u=mjohnson |  ok: [nifi2.hdp] => {
    "msg": "Password = {SSHA}uYQH8fvaqgs3VgpFB9tD0GXzs6JMz1Ka"
}
2016-10-02 15:20:00,172 p=74585 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 15:20:02,077 p=74585 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:20:02,084 p=74585 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-10-02 15:20:02,975 p=74585 u=mjohnson |  fatal: [nifi2.hdp]: FAILED! => {"changed": true, "cmd": ["chown", "ldap:ldap", "/var/lib/ldap/*"], "delta": "0:00:00.002486", "end": "2016-10-02 15:20:02.814384", "failed": true, "rc": 1, "start": "2016-10-02 15:20:02.811898", "stderr": "chown: cannot access ‘/var/lib/ldap/*’: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with owner rather than running chown"]}
2016-10-02 15:20:02,982 p=74585 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 15:20:02,982 p=74585 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 15:20:02,982 p=74585 u=mjohnson |  nifi2.hdp                  : ok=4    changed=1    unreachable=0    failed=1   
2016-10-02 15:22:16,231 p=74782 u=mjohnson |  PLAY [Setup Demo LDAP Server] **************************************************
2016-10-02 15:22:16,248 p=74782 u=mjohnson |  TASK [setup] *******************************************************************
2016-10-02 15:22:18,331 p=74782 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:22:18,340 p=74782 u=mjohnson |  TASK [Generate LDAP Password from secrete key] *********************************
2016-10-02 15:22:19,322 p=74782 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:22:19,330 p=74782 u=mjohnson |  TASK [debug] *******************************************************************
2016-10-02 15:22:19,368 p=74782 u=mjohnson |  ok: [nifi2.hdp] => {
    "msg": "Password = {SSHA}KXFyRA2NyU0ZQ3sDfGYvpLwFdmm5v3sN"
}
2016-10-02 15:22:19,375 p=74782 u=mjohnson |  TASK [generate the Database files] *********************************************
2016-10-02 15:22:21,305 p=74782 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:22:21,313 p=74782 u=mjohnson |  TASK [Change /var/lib/ldap directory permissions] ******************************
2016-10-02 15:22:22,211 p=74782 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:22:22,218 p=74782 u=mjohnson |  TASK [enable ldap service and start] *******************************************
2016-10-02 15:22:23,261 p=74782 u=mjohnson |  ok: [nifi2.hdp]
2016-10-02 15:22:23,269 p=74782 u=mjohnson |  TASK [Configure LDAP cosine] ***************************************************
2016-10-02 15:22:24,226 p=74782 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:22:24,234 p=74782 u=mjohnson |  TASK [Configure LDAP nis] ******************************************************
2016-10-02 15:22:25,160 p=74782 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:22:25,169 p=74782 u=mjohnson |  TASK [Update configuration for targeted ldap] **********************************
2016-10-02 15:22:27,446 p=74782 u=mjohnson |  changed: [nifi2.hdp]
2016-10-02 15:22:27,454 p=74782 u=mjohnson |  TASK [Apply LDAP Configurations] ***********************************************
2016-10-02 15:22:28,405 p=74782 u=mjohnson |  fatal: [nifi2.hdp]: FAILED! => {"changed": true, "cmd": "ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif", "delta": "0:00:00.016620", "end": "2016-10-02 15:22:28.237929", "failed": true, "rc": 20, "start": "2016-10-02 15:22:28.221309", "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0\nldap_modify: Type or value exists (20)\n\tadditional info: modify/add: olcSuffix: value #0 already exists", "stdout": "modifying entry \"olcDatabase={2}hdb,cn=config\"", "stdout_lines": ["modifying entry \"olcDatabase={2}hdb,cn=config\""], "warnings": []}
2016-10-02 15:22:28,412 p=74782 u=mjohnson |  NO MORE HOSTS LEFT *************************************************************
2016-10-02 15:22:28,413 p=74782 u=mjohnson |  PLAY RECAP *********************************************************************
2016-10-02 15:22:28,413 p=74782 u=mjohnson |  nifi2.hdp                  : ok=9    changed=4    unreachable=0    failed=1   
